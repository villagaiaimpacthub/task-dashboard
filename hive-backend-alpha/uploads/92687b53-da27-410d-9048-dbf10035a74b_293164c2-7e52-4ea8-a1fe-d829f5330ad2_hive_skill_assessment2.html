<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIVE Skill Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: rgba(0, 0, 0, 0.9);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid #333;
            text-align: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #40E0D0;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin: 0;
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            min-height: calc(100vh - 80px);
            display: flex;
            flex-direction: column;
        }

        .welcome-section {
            text-align: center;
            margin-bottom: 2rem;
        }

        .welcome-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #40E0D0, #00CED1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: #ccc;
            margin-bottom: 2rem;
        }

        .chat-container {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            border: 1px solid #333;
            padding: 1.5rem;
            margin-bottom: 2rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            max-height: 60vh;
        }

        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
            max-height: 400px;
        }

        .message {
            margin-bottom: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .message.ai {
            justify-content: flex-start;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .ai .message-avatar {
            background: linear-gradient(45deg, #40E0D0, #00CED1);
            color: #000;
        }

        .user .message-avatar {
            background: linear-gradient(45deg, #666, #888);
            color: #fff;
        }

        .message-content {
            max-width: 70%;
            padding: 0.75rem 1rem;
            border-radius: 15px;
            line-height: 1.5;
        }

        .ai .message-content {
            background: rgba(64, 224, 208, 0.1);
            border: 1px solid rgba(64, 224, 208, 0.3);
        }

        .user .message-content {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .input-section {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .chat-input {
            flex-grow: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #555;
            border-radius: 25px;
            padding: 0.75rem 1rem;
            color: #fff;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }

        .chat-input:focus {
            border-color: #40E0D0;
            box-shadow: 0 0 10px rgba(64, 224, 208, 0.3);
        }

        .send-button {
            background: linear-gradient(45deg, #40E0D0, #00CED1);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            color: #000;
            cursor: pointer;
            font-size: 1.2rem;
            transition: transform 0.2s;
        }

        .send-button:hover {
            transform: scale(1.1);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .start-button {
            background: linear-gradient(45deg, #40E0D0, #00CED1);
            border: none;
            border-radius: 25px;
            padding: 1rem 2rem;
            color: #000;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(64, 224, 208, 0.3);
        }

        .skill-tree {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            border: 1px solid #333;
            padding: 2rem;
            margin-top: 2rem;
        }

        .skill-category {
            margin-bottom: 2rem;
        }

        .skill-category h3 {
            color: #40E0D0;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .skill-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #555;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s;
        }

        .skill-item:hover {
            border-color: #40E0D0;
            transform: translateY(-2px);
        }

        .skill-level {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-top: 0.5rem;
        }

        .skill-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #333;
        }

        .skill-dot.filled {
            background: #40E0D0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #40E0D0, #00CED1);
            transition: width 0.5s ease;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.5rem;
            color: #888;
            font-style: italic;
            margin-bottom: 1rem;
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dot {
            width: 4px;
            height: 4px;
            background: #888;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }

        .hidden {
            display: none;
        }

        .export-section {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #333;
        }

        .export-button {
            background: linear-gradient(45deg, #40E0D0, #00CED1);
            border: none;
            border-radius: 25px;
            padding: 1rem 2rem;
            color: #000;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 1rem;
        }

        .export-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(64, 224, 208, 0.3);
        }

        .copy-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #555;
            border-radius: 25px;
            padding: 1rem 2rem;
            color: #fff;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .copy-button:hover {
            border-color: #40E0D0;
            background: rgba(64, 224, 208, 0.1);
        }

        .export-info {
            margin-top: 1rem;
            color: #888;
            font-size: 0.9rem;
        }

        .success-message {
            background: rgba(64, 224, 208, 0.2);
            border: 1px solid rgba(64, 224, 208, 0.5);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            color: #40E0D0;
            display: none;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1 class="logo">HIVE Assessment</h1>
    </header>

    <div class="main-container">
        <div id="welcome-screen">
            <div class="welcome-section">
                <h1 class="welcome-title">Skill Assessment Protocol</h1>
                <p class="welcome-subtitle">Let's discover your unique capabilities and match you with the perfect tasks</p>
                <button class="start-button" onclick="startAssessment()">Begin Assessment</button>
            </div>
        </div>

        <div id="chat-screen" class="hidden">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="typing-indicator" id="typingIndicator">
                    <span>HIVE is analyzing</span>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
                <div class="input-section">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Share your response..." onkeypress="handleKeyPress(event)">
                    <button class="send-button" id="sendButton" onclick="sendMessage()">âž¤</button>
                </div>
            </div>
        </div>

        <div id="results-screen" class="hidden">
            <div class="welcome-section">
                <h1 class="welcome-title">Assessment Complete</h1>
                <p class="welcome-subtitle">Your skill profile has been generated</p>
            </div>
            <div class="skill-tree" id="skillTree"></div>
            <div class="export-section">
                <button class="export-button" onclick="exportSkills()">Export to System</button>
                <button class="copy-button" onclick="copySkillData()">Copy Data</button>
                <div class="export-info">
                    Export your skill profile to integrate with other HIVE systems or copy the data for manual transfer
                </div>
                <div class="success-message" id="successMessage"></div>
            </div>
        </div>
    </div>

    <script>
        let currentQuestion = 0;
        let userResponses = [];
        let skillProfile = {};

        const questions = [
            {
                text: "Welcome to HIVE! I'm here to understand your unique capabilities. Let's start with the big picture - what type of work energizes you most? Are you drawn to creative problem-solving, systematic analysis, or building and creating things?",
                category: "work_style"
            },
            {
                text: "Interesting! When you tackle a complex challenge, what's your natural approach? Do you dive deep into research first, brainstorm multiple solutions, or prefer to start experimenting right away?",
                category: "problem_solving"
            },
            {
                text: "Tell me about a recent project or accomplishment you're proud of. What made it special, and what role did you play in making it successful?",
                category: "achievements"
            },
            {
                text: "How do you prefer to work with others? Are you most effective leading a team, collaborating as an equal partner, or working independently and contributing your specialized expertise?",
                category: "collaboration"
            },
            {
                text: "What tools, technologies, or methods do you find yourself naturally gravitating toward? This could be anything from software and programming languages to communication methods or analytical frameworks.",
                category: "technical_skills"
            },
            {
                text: "When learning something new, what works best for you? Do you prefer hands-on experimentation, structured courses, learning from mentors, or diving into documentation and figuring it out yourself?",
                category: "learning_style"
            },
            {
                text: "Think about your ideal work environment. Do you thrive under tight deadlines with high stakes, prefer steady progress on long-term projects, or like variety with different types of challenges?",
                category: "work_environment"
            },
            {
                text: "What kind of impact do you want your work to have? Are you motivated by solving technical challenges, helping people directly, building systems that scale, or creating something entirely new?",
                category: "motivation"
            },
            {
                text: "Finally, if you could contribute to any type of project in the HIVE ecosystem, what would excite you most? Think about where your skills and interests align with creating value for the community.",
                category: "aspirations"
            }
        ];

        function startAssessment() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('chat-screen').classList.remove('hidden');
            
            setTimeout(() => {
                askNextQuestion();
            }, 500);
        }

        function askNextQuestion() {
            if (currentQuestion < questions.length) {
                showTypingIndicator();
                
                setTimeout(() => {
                    hideTypingIndicator();
                    addMessage(questions[currentQuestion].text, 'ai');
                    updateProgress();
                }, 1500);
            } else {
                completeAssessment();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message && currentQuestion < questions.length) {
                addMessage(message, 'user');
                userResponses.push({
                    question: currentQuestion,
                    category: questions[currentQuestion].category,
                    response: message
                });
                
                input.value = '';
                currentQuestion++;
                
                setTimeout(() => {
                    askNextQuestion();
                }, 1000);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = sender === 'ai' ? 'H' : 'U';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = text;
            
            if (sender === 'user') {
                messageDiv.appendChild(content);
                messageDiv.appendChild(avatar);
            } else {
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(content);
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'flex';
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function completeAssessment() {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                addMessage("Excellent! I've analyzed your responses and built your comprehensive skill profile. Let me show you what we've discovered about your capabilities.", 'ai');
                
                setTimeout(() => {
                    analyzeSkills();
                    showResults();
                }, 2000);
            }, 2000);
        }

        function analyzeSkills() {
            // Initialize skill profile with base scores
            skillProfile = {
                "Technical Skills": {
                    "Programming": 1,
                    "Data Analysis": 1,
                    "System Design": 1,
                    "DevOps": 1
                },
                "Creative Skills": {
                    "Problem Solving": 1,
                    "Innovation": 1,
                    "Design Thinking": 1,
                    "Content Creation": 1
                },
                "Leadership Skills": {
                    "Team Management": 1,
                    "Strategic Planning": 1,
                    "Communication": 1,
                    "Mentoring": 1
                },
                "Domain Expertise": {
                    "Research": 1,
                    "Analytics": 1,
                    "Process Optimization": 1,
                    "Quality Assurance": 1
                }
            };

            // Analyze each user response for both traditional and emergent skills
            const allResponses = userResponses.map(r => r.response).join(' ').toLowerCase();
            
            userResponses.forEach(response => {
                const text = response.response.toLowerCase();
                analyzeResponse(text, response.category);
            });

            // NEW: Detect emergent/unique skills from the full conversation
            const emergentSkills = detectEmergentSkills(allResponses);
            if (Object.keys(emergentSkills).length > 0) {
                skillProfile["Emergent Capabilities"] = emergentSkills;
            }

            // Ensure all scores are between 1-5
            Object.keys(skillProfile).forEach(category => {
                Object.keys(skillProfile[category]).forEach(skill => {
                    skillProfile[category][skill] = Math.min(5, Math.max(1, skillProfile[category][skill]));
                });
            });
        }

        function detectEmergentSkills(fullText) {
            const emergentSkills = {};

            // Systems Thinking Detection
            const systemsIndicators = ['interconnected', 'holistic', 'ecosystem', 'feedback loops', 'emergent', 'complexity', 'systems thinking', 'interdisciplinary', 'ripple effects', 'unintended consequences', 'leverage points'];
            if (containsMultiple(fullText, systemsIndicators, 2)) {
                emergentSkills["Systems Thinking"] = calculateEmergentScore(fullText, systemsIndicators);
            }

            // Regenerative Mindset Detection
            const regenerativeIndicators = ['regenerative', 'sustainable', 'circular', 'biomimicry', 'restoration', 'healing', 'regeneration', 'living systems', 'thriving', 'abundance', 'reciprocity', 'stewardship'];
            if (containsMultiple(fullText, regenerativeIndicators, 2)) {
                emergentSkills["Regenerative Design"] = calculateEmergentScore(fullText, regenerativeIndicators);
            }

            // Future-Oriented Thinking
            const futuristIndicators = ['future', 'vision', 'possibilities', 'emerging', 'transformation', 'evolution', 'next phase', 'paradigm shift', 'breakthrough', 'revolutionary', 'pioneering', 'cutting edge'];
            if (containsMultiple(fullText, futuristIndicators, 3)) {
                emergentSkills["Futurist Thinking"] = calculateEmergentScore(fullText, futuristIndicators);
            }

            // Conscious Leadership Detection
            const consciousLeadershipIndicators = ['consciousness', 'awareness', 'mindfulness', 'purpose', 'meaning', 'values', 'ethical', 'moral', 'compassion', 'empathy', 'serve', 'stewardship'];
            if (containsMultiple(fullText, consciousLeadershipIndicators, 2)) {
                emergentSkills["Conscious Leadership"] = calculateEmergentScore(fullText, consciousLeadershipIndicators);
            }

            // Trans-disciplinary Integration
            const transdisciplinaryIndicators = ['interdisciplinary', 'cross-functional', 'bridge', 'integrate', 'synthesize', 'connect', 'weave', 'blend', 'combine', 'merge', 'fusion', 'intersection'];
            if (containsMultiple(fullText, transdisciplinaryIndicators, 2)) {
                emergentSkills["Trans-disciplinary Integration"] = calculateEmergentScore(fullText, transdisciplinaryIndicators);
            }

            // Complexity Navigation
            const complexityIndicators = ['complexity', 'uncertainty', 'ambiguity', 'paradox', 'nuance', 'adaptive', 'resilient', 'emergent', 'non-linear', 'dynamic', 'chaos', 'emergence'];
            if (containsMultiple(fullText, complexityIndicators, 2)) {
                emergentSkills["Complexity Navigation"] = calculateEmergentScore(fullText, complexityIndicators);
            }

            // Ecological Intelligence
            const ecologicalIndicators = ['ecological', 'nature', 'natural', 'biological', 'ecosystem', 'symbiosis', 'biodiversity', 'permaculture', 'biosphere', 'gaia', 'living systems', 'web of life'];
            if (containsMultiple(fullText, ecologicalIndicators, 2)) {
                emergentSkills["Ecological Intelligence"] = calculateEmergentScore(fullText, ecologicalIndicators);
            }

            // Cultural Bridge Building
            const culturalBridgeIndicators = ['culture', 'cultural', 'diversity', 'inclusion', 'bridge', 'translate', 'mediate', 'facilitate', 'cross-cultural', 'global', 'universal', 'human'];
            if (containsMultiple(fullText, culturalBridgeIndicators, 2)) {
                emergentSkills["Cultural Bridge Building"] = calculateEmergentScore(fullText, culturalBridgeIndicators);
            }

            // Pattern Recognition & Synthesis
            const patternIndicators = ['pattern', 'patterns', 'connections', 'relationships', 'synthesis', 'integration', 'weaving', 'connecting dots', 'big picture', 'meta', 'holistic view'];
            if (containsMultiple(fullText, patternIndicators, 2)) {
                emergentSkills["Pattern Synthesis"] = calculateEmergentScore(fullText, patternIndicators);
            }

            // Transformational Facilitation
            const transformationalIndicators = ['transformation', 'change', 'shift', 'catalyst', 'facilitate', 'guide', 'breakthrough', 'evolution', 'growth', 'development', 'emergence', 'metamorphosis'];
            if (containsMultiple(fullText, transformationalIndicators, 3)) {
                emergentSkills["Transformational Facilitation"] = calculateEmergentScore(fullText, transformationalIndicators);
            }

            // Integral Thinking (Ken Wilber style)
            const integralIndicators = ['integral', 'perspectives', 'multiple viewpoints', 'paradox', 'both/and', 'levels', 'stages', 'development', 'evolution', 'consciousness', 'worldview'];
            if (containsMultiple(fullText, integralIndicators, 2)) {
                emergentSkills["Integral Perspective"] = calculateEmergentScore(fullText, integralIndicators);
            }

            return emergentSkills;
        }

        function containsMultiple(text, indicators, threshold) {
            const matches = indicators.filter(indicator => text.includes(indicator));
            return matches.length >= threshold;
        }

        function calculateEmergentScore(text, indicators) {
            let score = 1; // Base score
            let matchCount = 0;
            
            indicators.forEach(indicator => {
                if (text.includes(indicator)) {
                    matchCount++;
                }
            });

            // Higher scores for more matches and depth indicators
            score += Math.min(matchCount * 0.4, 2.5);

            // Bonus for depth/expertise language
            const depthIndicators = ['deep', 'profound', 'mastery', 'expertise', 'years', 'experience', 'practice', 'study', 'research'];
            depthIndicators.forEach(indicator => {
                if (text.includes(indicator)) {
                    score += 0.3;
                }
            });

            // Bonus for action/implementation language
            const actionIndicators = ['implement', 'practice', 'apply', 'create', 'build', 'design', 'facilitate', 'lead'];
            actionIndicators.forEach(indicator => {
                if (text.includes(indicator)) {
                    score += 0.4;
                }
            });

            return Math.min(5, score);
        }

        function analyzeResponse(text, category) {
            // Technical Skills Analysis
            const techKeywords = {
                programming: ['code', 'coding', 'programming', 'developer', 'software', 'javascript', 'python', 'react', 'node', 'api', 'database', 'sql', 'algorithm', 'debug', 'framework', 'library', 'github', 'git'],
                dataAnalysis: ['data', 'analysis', 'analytics', 'statistics', 'excel', 'sql', 'python', 'r', 'dashboard', 'metrics', 'kpi', 'visualization', 'tableau', 'powerbi', 'trends', 'insights'],
                systemDesign: ['architecture', 'system', 'design', 'scalable', 'infrastructure', 'microservices', 'api', 'database', 'distributed', 'cloud', 'aws', 'azure', 'performance', 'security'],
                devops: ['deployment', 'ci/cd', 'docker', 'kubernetes', 'automation', 'monitoring', 'aws', 'azure', 'pipeline', 'infrastructure', 'devops', 'cloud', 'server']
            };

            // Creative Skills Analysis
            const creativeKeywords = {
                problemSolving: ['solve', 'problem', 'challenge', 'solution', 'approach', 'brainstorm', 'analyze', 'troubleshoot', 'debug', 'investigate', 'figure out', 'work through'],
                innovation: ['innovative', 'creative', 'new', 'novel', 'invention', 'breakthrough', 'experiment', 'prototype', 'iterate', 'disrupt', 'revolutionize', 'cutting-edge'],
                designThinking: ['design', 'user', 'ux', 'ui', 'prototype', 'wireframe', 'user experience', 'human-centered', 'empathy', 'iterate', 'test', 'feedback'],
                contentCreation: ['write', 'writing', 'content', 'blog', 'article', 'documentation', 'presentation', 'video', 'design', 'creative', 'storytelling', 'marketing']
            };

            // Leadership Skills Analysis
            const leadershipKeywords = {
                teamManagement: ['team', 'lead', 'manage', 'manager', 'supervise', 'coordinate', 'delegate', 'organize', 'direct', 'guide', 'motivate', 'hire', 'mentor'],
                strategicPlanning: ['strategy', 'strategic', 'plan', 'planning', 'roadmap', 'vision', 'goals', 'objectives', 'long-term', 'direction', 'future', 'growth'],
                communication: ['communicate', 'present', 'presentation', 'speak', 'explain', 'discuss', 'meeting', 'collaborate', 'facilitate', 'negotiate', 'persuade'],
                mentoring: ['mentor', 'teach', 'train', 'coach', 'guide', 'help', 'support', 'develop', 'growth', 'feedback', 'advice', 'knowledge transfer']
            };

            // Domain Expertise Analysis
            const domainKeywords = {
                research: ['research', 'study', 'investigate', 'analyze', 'academic', 'paper', 'publication', 'methodology', 'hypothesis', 'experiment', 'findings'],
                analytics: ['analytics', 'metrics', 'measurement', 'tracking', 'performance', 'optimization', 'conversion', 'roi', 'insights', 'trends', 'patterns'],
                processOptimization: ['process', 'optimize', 'efficiency', 'workflow', 'streamline', 'improve', 'automation', 'lean', 'agile', 'methodology', 'best practices'],
                qualityAssurance: ['quality', 'testing', 'qa', 'validation', 'verification', 'standards', 'compliance', 'review', 'audit', 'documentation', 'procedures']
            };

            // Skill level indicators
            const expertIndicators = ['expert', 'mastery', 'advanced', 'senior', 'lead', 'architect', 'years of experience', 'built from scratch', 'designed', 'created'];
            const advancedIndicators = ['experienced', 'proficient', 'skilled', 'comfortable', 'familiar', 'worked with', 'implemented', 'developed'];
            const intermediateIndicators = ['learning', 'some experience', 'basic', 'beginner', 'started', 'trying', 'exploring'];

            // Apply scoring based on keyword matches and experience level
            function scoreSkill(keywords, skillCategory, skillName) {
                let score = skillProfile[skillCategory][skillName];
                let keywordMatches = 0;
                
                keywords.forEach(keyword => {
                    if (text.includes(keyword)) {
                        keywordMatches++;
                    }
                });

                if (keywordMatches > 0) {
                    // Base score increase for keyword matches
                    score += Math.min(keywordMatches * 0.5, 2);

                    // Additional scoring based on experience level indicators
                    expertIndicators.forEach(indicator => {
                        if (text.includes(indicator)) score += 1.5;
                    });
                    
                    advancedIndicators.forEach(indicator => {
                        if (text.includes(indicator)) score += 1;
                    });
                    
                    intermediateIndicators.forEach(indicator => {
                        if (text.includes(indicator)) score += 0.5;
                    });

                    // Bonus for specific accomplishments
                    if (text.includes('built') || text.includes('created') || text.includes('designed') || text.includes('implemented')) {
                        score += 1;
                    }
                    
                    // Bonus for leadership/ownership language
                    if (text.includes('led') || text.includes('managed') || text.includes('responsible for')) {
                        score += 0.8;
                    }
                }

                skillProfile[skillCategory][skillName] = score;
            }

            // Apply analysis to all skill categories
            scoreSkill(techKeywords.programming, "Technical Skills", "Programming");
            scoreSkill(techKeywords.dataAnalysis, "Technical Skills", "Data Analysis");
            scoreSkill(techKeywords.systemDesign, "Technical Skills", "System Design");
            scoreSkill(techKeywords.devops, "Technical Skills", "DevOps");

            scoreSkill(creativeKeywords.problemSolving, "Creative Skills", "Problem Solving");
            scoreSkill(creativeKeywords.innovation, "Creative Skills", "Innovation");
            scoreSkill(creativeKeywords.designThinking, "Creative Skills", "Design Thinking");
            scoreSkill(creativeKeywords.contentCreation, "Creative Skills", "Content Creation");

            scoreSkill(leadershipKeywords.teamManagement, "Leadership Skills", "Team Management");
            scoreSkill(leadershipKeywords.strategicPlanning, "Leadership Skills", "Strategic Planning");
            scoreSkill(leadershipKeywords.communication, "Leadership Skills", "Communication");
            scoreSkill(leadershipKeywords.mentoring, "Leadership Skills", "Mentoring");

            scoreSkill(domainKeywords.research, "Domain Expertise", "Research");
            scoreSkill(domainKeywords.analytics, "Domain Expertise", "Analytics");
            scoreSkill(domainKeywords.processOptimization, "Domain Expertise", "Process Optimization");
            scoreSkill(domainKeywords.qualityAssurance, "Domain Expertise", "Quality Assurance");

            // Category-specific bonus scoring based on question context
            if (category === 'technical_skills' || category === 'achievements') {
                // Boost technical skills if they mention specific tools/technologies
                Object.keys(skillProfile["Technical Skills"]).forEach(skill => {
                    skillProfile["Technical Skills"][skill] += 0.3;
                });
            }

            if (category === 'collaboration' || category === 'work_environment') {
                // Boost leadership skills for collaboration-focused responses
                Object.keys(skillProfile["Leadership Skills"]).forEach(skill => {
                    skillProfile["Leadership Skills"][skill] += 0.3;
                });
            }

            if (category === 'problem_solving' || category === 'learning_style') {
                // Boost creative skills for problem-solving responses
                Object.keys(skillProfile["Creative Skills"]).forEach(skill => {
                    skillProfile["Creative Skills"][skill] += 0.3;
                });
            }
        }

        function showResults() {
            setTimeout(() => {
                document.getElementById('chat-screen').classList.add('hidden');
                document.getElementById('results-screen').classList.remove('hidden');
                renderSkillTree();
            }, 1000);
        }

        function renderSkillTree() {
            const skillTreeContainer = document.getElementById('skillTree');
            
            Object.keys(skillProfile).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'skill-category';
                
                const categoryTitle = document.createElement('h3');
                categoryTitle.textContent = category;
                categoryDiv.appendChild(categoryTitle);
                
                const skillsGrid = document.createElement('div');
                skillsGrid.className = 'skills-grid';
                
                Object.keys(skillProfile[category]).forEach(skill => {
                    const level = skillProfile[category][skill];
                    const skillItem = document.createElement('div');
                    skillItem.className = 'skill-item';
                    
                    const skillName = document.createElement('div');
                    skillName.textContent = skill;
                    skillItem.appendChild(skillName);
                    
                    const skillLevel = document.createElement('div');
                    skillLevel.className = 'skill-level';
                    
                    for (let i = 1; i <= 5; i++) {
                        const dot = document.createElement('div');
                        dot.className = `skill-dot ${i <= level ? 'filled' : ''}`;
                        skillLevel.appendChild(dot);
                    }
                    
                    skillItem.appendChild(skillLevel);
                    skillsGrid.appendChild(skillItem);
                });
                
                categoryDiv.appendChild(skillsGrid);
                skillTreeContainer.appendChild(categoryDiv);
            });
        }

        function generateExportData() {
            // Get top skills (level 4-5) for quick integration
            const topSkills = [];
            const allSkills = [];
            
            Object.keys(skillProfile).forEach(category => {
                Object.keys(skillProfile[category]).forEach(skill => {
                    const level = skillProfile[category][skill];
                    const skillData = {
                        name: skill,
                        category: category,
                        level: level,
                        proficiency: level >= 4 ? 'Expert' : level >= 3 ? 'Advanced' : level >= 2 ? 'Intermediate' : 'Beginner'
                    };
                    
                    allSkills.push(skillData);
                    
                    if (level >= 4) {
                        topSkills.push(skillData);
                    }
                });
            });

            // Sort by level (highest first)
            topSkills.sort((a, b) => b.level - a.level);
            allSkills.sort((a, b) => b.level - a.level);

            return {
                userId: 'user_' + Date.now(), // Generate unique ID
                assessmentDate: new Date().toISOString(),
                topSkills: topSkills.slice(0, 5), // Top 5 skills
                allSkills: allSkills,
                skillProfile: skillProfile,
                summary: {
                    totalSkills: allSkills.length,
                    expertLevel: topSkills.length,
                    strongestCategory: getStrongestCategory(),
                    recommendedRoles: generateRoleRecommendations(topSkills)
                }
            };
        }

        function getStrongestCategory() {
            let strongest = '';
            let highestAverage = 0;
            
            Object.keys(skillProfile).forEach(category => {
                const skills = skillProfile[category];
                const average = Object.values(skills).reduce((sum, level) => sum + level, 0) / Object.keys(skills).length;
                
                if (average > highestAverage) {
                    highestAverage = average;
                    strongest = category;
                }
            });
            
            return strongest;
        }

        function generateRoleRecommendations(topSkills) {
            const roles = [];
            const categories = topSkills.map(skill => skill.category);
            
            if (categories.includes('Technical Skills')) {
                roles.push('Technical Lead', 'Software Developer', 'Data Engineer');
            }
            if (categories.includes('Leadership Skills')) {
                roles.push('Project Manager', 'Team Lead', 'Scrum Master');
            }
            if (categories.includes('Creative Skills')) {
                roles.push('UX Designer', 'Innovation Specialist', 'Product Manager');
            }
            if (categories.includes('Domain Expertise')) {
                roles.push('Research Analyst', 'Quality Specialist', 'Process Consultant');
            }
            
            return [...new Set(roles)].slice(0, 4); // Remove duplicates and limit to 4
        }

        function exportSkills() {
            const exportData = generateExportData();
            
            // Create download link
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `hive_skill_profile_${exportData.userId}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showSuccessMessage('Skill profile exported successfully! File downloaded to your device.');
            
            // Also log to console for integration purposes
            console.log('HIVE Skill Export Data:', exportData);
        }

        function copySkillData() {
            const exportData = generateExportData();
            const dataStr = JSON.stringify(exportData, null, 2);
            
            navigator.clipboard.writeText(dataStr).then(() => {
                showSuccessMessage('Skill data copied to clipboard! Ready for integration.');
            }).catch(err => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = dataStr;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showSuccessMessage('Skill data copied to clipboard! Ready for integration.');
            });
        }

        function showSuccessMessage(message) {
            const successElement = document.getElementById('successMessage');
            successElement.textContent = message;
            successElement.style.display = 'block';
            
            setTimeout(() => {
                successElement.style.display = 'none';
            }, 4000);
        }
    </script>
</body>
</html>